# Copyright 2018 TensorHub, Inc. and contributors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# ===================================================================
# Package def
# ===================================================================

- package: gpkg.imagenet
  version: 0.5.0.dev1
  description: Models pretrained on ImageNet
  url: https://github.com/guildai/packages/tree/master/imagenet
  author: Guild AI
  author-email: packages@guild.ai
  license: Apache 2.0

# ===================================================================
# Inception
# ===================================================================

- model: inception
  description: Image classifier using Inception trained on ImageNet
  operations:
    classify:
      description: Classify an image
      main: classify_image_wrapper --model_dir model --image_file ${image}
      requires:
        - classify-image-script
        - inception-model
      flags:
        image:
          description: Image to classify
          required: yes
          arg-name: image_name
  resources:
    classify-image-script:
      sources:
        - url: https://raw.githubusercontent.com/tensorflow/models/86ecc9730d751c1f72e3bfecac958166390f4125/tutorials/image/imagenet/classify_image.py
          sha256: f6ddbe32c635fd5599db6f0e5a0257c0ad8664c9737471f879f97ca98233da58
    inception-model:
      path: model
      sources:
        - url: http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz
          sha256: f6b539e07358fc4622efdd40cdb5577672c46cd416bbfccf9d4d2438f9b93a1c
