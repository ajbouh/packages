- name: slim-resnet-50
  description: ResNet-50 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-50
      cmd: >
        slim/train_image_classifier \
          --model_name resnet_v1_50 \
          --train_dir . \
          --dataset_split_name train \
          --dataset_dir data
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-50
      cmd: >
        slim/train_image_classifier \
          --model_name resnet_v1_50 \
          --train_dir . \
          --dataset_split_name train \
          --dataset_dir data \
          --checkpoint_path resnet_v1_50.ckpt \
          --checkpoint_exclude_scopes ResNetV1_50/Logits,ResNetV1_50/AuxLogits \
          --trainable_scopes ResNetV1_50/Logits,ResNetV1_50/AuxLogits
      flags:
        $include: train-flags
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoint
  resources:
    checkpoint:
      sources:
        - url: http://download.tensorflow.org/models/resnet_v1_50_2016_08_28.tar.gz
          sha256: xxx

- name: slim-resnet-101
  description: ResNet-101 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-101
      cmd: train --model_name resnet_v1_101
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-101
      cmd: train --model_name resnet_v1_101
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- name: slim-resnet-152
  description: ResNet-152 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-152
      cmd: train --model_name resnet_v1_152
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-152
      cmd: train --model_name resnet_v1_152
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- name: slim-resnet-200
  description: ResNet-200 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-200
      cmd: train --model_name resnet_v1_200
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-200
      cmd: train --model_name resnet_v1_200
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- name: slim-resnet-50-v2
  description: ResNet-50-v2 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-50-v2
      cmd: train --model_name resnet_v2_50
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-50-v2
      cmd: train --model_name resnet_v2_50
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- name: slim-resnet-101-v2
  description: ResNet-101-v2 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-101-v2
      cmd: train --model_name resnet_v2_101
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-101-v2
      cmd: train --model_name resnet_v2_101
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- name: slim-resnet-152-v2
  description: ResNet-152-v2 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-152-v2
      cmd: train --model_name resnet_v2_152
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-152-v2
      cmd: train --model_name resnet_v2_152
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- name: slim-resnet-200-v2
  description: ResNet-200-v2 classifier in TF-Slim
  operations:
    train:
      description: Train ResNet-200-v2
      cmd: train --model_name resnet_v2_200
      requires:
        - slim/lib
        - datasets:${dataset}
      flags:
        $include: train-flags
    fine-tune:
      description: Fine-tune ResNet-200-v2
      cmd: train --model_name resnet_v2_200
      requires:
        - slim/lib
        - datasets:${dataset}
        - checkpoints:${checkpoint}
      flags:
        $include: fine-tune-flags

- !load train-flags
- !load dataset-resources
